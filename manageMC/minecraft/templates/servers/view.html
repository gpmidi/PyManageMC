{% extends "base.html" %}
{% load cache %}
{# view/edit a server #}

{% block title %}{{ server.name }} - Minecraft Server Manager{% endblock %}
{% block body %}	
	<div id="serverstatus">
	   <h4>Server Status</h4>
	       <div>
	           <input id="servermessage" type="text" name="servermessage"/>
	       </div>
	</div>
	
	<h4>Server Info</h4>
	<form action="." method="post">
		{% csrf_token %}
		<table border="0">
			{{ form.as_table }}
		</table>
		<input type="submit" value="submit"/>
	</form>
    
    <h4>Say Something</h4>
    <script type="text/javascript">    
    var srvsay = function() {
    	Dajaxice.minecraft.server_say(
                function(){},
                {
                    'server_pk':{{ server.pk }},
                    'message':$("#tosay").val()
                    }
                );
    	$("#tosay").val("");
    };
    var forEnter = function(event) {
        if (event.which == 13 || event.keyCode == 13) {
        	event.preventDefault();
        	srvsay();
        };
    };
    </script>
    <input id="tosay" type="text" name="tosay" onkeypress="forEnter(event)"/>
    <input type="submit" value="say" onclick="srvsay()"/>
    
{% endblock %}
