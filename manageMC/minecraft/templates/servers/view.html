{% extends "base.html" %}
{% load cache %}
{# view/edit a server #}

{% block imports %}
    <script src="/static/server.js"></script>
{% endblock %}

{% block title %}{{ server.name }} - Minecraft Server Manager{% endblock %}

{% block quick %}
    {# Server Status #}
    <ul class="nav">    
        <li>Server Status</li>
        <li>
            <input id="servermessage" type="text" name="serverstatus"
                onclick="Dajaxice.minecraft.server_status(function(){},{'server_pk':{{ server.pk }}});"
                onload="Dajaxice.minecraft.server_status(function(){},{'server_pk':{{ server.pk }}});"
            />
        </li>         
        <li>
	        <input type="submit" value="Start" onclick="Dajaxice.minecraft.server_start(Dajax.process,{'server_pk':{{ server.pk }}});"/>
	        <input type="submit" value="Stop" onclick="Dajaxice.minecraft.server_stop(Dajax.process,{'server_pk':{{ server.pk }}});"/>
	        <input type="submit" value="Restart" onclick="Dajaxice.minecraft.server_restart(Dajax.process,{'server_pk':{{ server.pk }}});"/>
	        <input type="submit" value="Kill" onclick="Dajaxice.minecraft.server_kill(Dajax.process,{'server_pk':{{ server.pk }}});"/>
        </li>
    </ul>
    {# Server status auto update #}
    <script type="text/javascript">    
	    (function(){
	        Dajaxice.minecraft.server_status (
	                 Dajax.process,
	                 {'server_pk':{{ server.pk }}}
	                     );
	             setTimeout(arguments.callee, 2500);
	        })();            
	</script>   
    {# Server Commands #}
    <ul class="nav">  
        <li>Server Talk</li>
        <li>
            <input id="tosay" type="text" name="tosay" onkeypress="forEnter(event)"/>
            <input type="submit" value="Say" onclick="srvsay()"/>
        </li>
    </ul>
    <ul class="nav">  
        <li>Send Command</li>
        <li>
            <input id="tosend" type="text" name="tosend" onkeypress="forEnter(event)"/>
            <input type="submit" value="Send" onclick="srvsay()"/>
        </li>
    </ul>
     
    <ul class="nav">  
        <li>Server Administration</li>
        <li>FIXME</li>
    </ul>    

{% endblock %}

{% block body %}	
    <div>
        <h4>Server Info</h4>
	    <form action="." method="post">
	        {% csrf_token %}
	        <table border="0">
	            {{ form.as_table }}
	        </table>
	        <input type="submit" value="submit"/>
	    </form> 
    </div>
{% endblock %}
