{% extends "base.html" %}
{% load cache %}
{# view/edit a server #}

{% block title %}{{ server.name }} - Minecraft Server Manager{% endblock %}
{% block body %}	
    <div id="commandsbar" style="float: left; border-right: 1px solid black; padding: 5px;">
        <div class="commands" id="serverstatus">
			<h4>Server Status</h4>
			<script type="text/javascript">    
			    (function(){
			        Dajaxice.minecraft.server_status (
			                 Dajax.process,
			                 {'server_pk':{{ server.pk }}}
			                 );
			         setTimeout(arguments.callee, 2500);
			     })();
			 </script>
			<div>
			    <input id="servermessage" type="text" name="serverstatus"
			    onclick="Dajaxice.minecraft.server_status (function(){},{'server_pk':{{ server.pk }}});"
			    />
			</div>
	        <div class="commands" id="commands0">
	            <input type="submit" value="start" onclick="Dajaxice.minecraft.server_start(Dajax.process,{'server_pk':{{ server.pk }}});"/>
	            <input type="submit" value="Stop" onclick="Dajaxice.minecraft.server_stop(Dajax.process,{'server_pk':{{ server.pk }}});"/>
	        </div>			   
		</div>
        <div class="commands" id="commands1">
		    <h4>Say Something</h4>
		    <script type="text/javascript">    
		        var srvsay = function() {
		            Dajaxice.minecraft.server_say(
		                    Dajax.process,
		                    {
		                        'server_pk':{{ server.pk }},
		                        'message':$("#tosay").val()
		                        }
		                    );
		            $("#tosay").val("");
		        };
		        var forEnter = function(event) {
		            if (event.which == 13 || event.keyCode == 13) {
		                event.preventDefault();
		                srvsay();
		            };
		        };
		    </script>
		    <input id="tosay" type="text" name="tosay" onkeypress="forEnter(event)"/>
		    <input type="submit" value="say" onclick="srvsay()"/>
		</div>        
        
    </div>
    
    <div id="commandsbar" style="border-left: 1px solid black; padding: 5px;">
        <h4>Server Info</h4>
	    <form action="." method="post">
	        {% csrf_token %}
	        <table border="0">
	            {{ form.as_table }}
	        </table>
	        <input type="submit" value="submit"/>
	    </form> 
    </div>   
    
{% endblock %}
